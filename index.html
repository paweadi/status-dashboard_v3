
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Markel Services Dashboard</title>
<style>
:root {
    --bg: #ffffff;
    --fg: #1f2937;
    --muted: #6b7280;
    --border: #d1d5db;
    --up-bg: #10b981;
    --up-fg: #ffffff;
    --down-bg: #ef4444;
    --down-fg: #ffffff;
    --deg-bg: #f59e0b;
    --deg-fg: #ffffff;
}
body { margin: 0; background: var(--bg); color: var(--fg); font-family: system-ui, sans-serif; }
header { padding: 24px 16px; border-bottom: 1px solid var(--border); }
h1 { margin: 0 0 8px; }
.ts { color: var(--muted); }
main { padding: 16px; }
table { width: 100%; border-collapse: collapse; }
th, td { padding: 10px; border: 1px solid var(--border); text-align: left; }
th { background-color: #f3f4f6; font-weight: 700; font-size: 16px; }
tr:nth-child(even) { background-color: #f9fafb; }
tr:hover { background-color: #e5e7eb; }
.badge { padding: 4px 10px; border-radius: 999px; font-size: 12px; background: #e5e7eb; color: var(--fg); }
.badge.up { background: var(--up-bg); color: var(--up-fg); }
.badge.down { background: var(--down-bg); color: var(--down-fg); }
.badge.degraded { background: var(--deg-bg); color: var(--deg-fg); }
footer { color: var(--muted); padding: 12px; text-align: center; border-top: 1px solid var(--border); }
</style>
</head>
<body>
<header>
<h1>Markel Services Dashboard</h1>
<p class="ts">Auto-refresh every 5 minutes</p>
</header>
<main>
<table>
<thead>
<tr>
<th>Service</th><th>Status</th><th>Description</th><th>Link</th>
</tr>
</thead>
<tbody id="service-table">
<!-- Rows will be populated dynamically -->
</tbody>
</table>
</main>
<footer>
Last updated: <span id="last-updated"></span>
</footer>
<script>
const services = [
    { name: "Azure Status", key: "azure", link: "https://status.azure.com" },
    { name: "Azure DevOps", key: "azuredevops", link: "https://status.dev.azure.com" },
    { name: "Azure Databricks", key: "databricks", link: "https://status.azuredatabricks.net" },
    { name: "JFrog", key: "jfrog", link: "https://status.jfrog.io" },
    { name: "Elastic", key: "elastic", link: "https://status.elastic.co" },
    { name: "Octopus", key: "octopus", link: "https://status.octopus.com" },
    { name: "Lucid", key: "lucid", link: "https://status.lucid.co" },
    { name: "Jira Software", key: "jira", link: "https://status.atlassian.com" },
    { name: "Confluence", key: "confluence", link: "https://status.atlassian.com" },
    { name: "CucumberStudio", key: "cucumber", link: "https://status.cucumberstudio.com" },
    { name: "Fivetran", key: "fivetran", link: "https://status.fivetran.com" },
    { name: "Brainboard", key: "brainboard", link: "https://status.brainboard.co" },
    { name: "Port", key: "port", link: "https://status.port.io" }
];

function renderTable() {
    const tbody = document.getElementById('service-table');
    tbody.innerHTML = '';
    services.forEach(s => {
        tbody.innerHTML += `
        <tr>
            <td>${s.name}</td>
            <td><span class="badge">Loading...</span></td>
            <td>Loading...</td>
            <td>${s.link}View</a></td>
        </tr>`;
    });
}

async function updateStatus() {
    try {
        const response = await fetch('https://your-render-app.onrender.com/status');
        const data = await response.json();
        const rows = document.querySelectorAll('#service-table tr');
        services.forEach((s, i) => {
            const badge = rows[i].querySelector('.badge');
            const descCell = rows[i].querySelectorAll('td')[2];
            if (data[s.key]) {
                badge.textContent = data[s.key].status;
                badge.className = `badge ${data[s.key].badge}`;
                descCell.textContent = data[s.key].status;
            } else {
                badge.textContent = 'Error';
                badge.className = 'badge degraded';
                descCell.textContent = 'Unavailable';
            }
        });
        document.getElementById('last-updated').textContent = new Date().toLocaleString();
    } catch (err) {
        console.error('Error fetching status:', err);
    }
}

renderTable();
updateStatus();
setInterval(updateStatus, 300000);
</script>
</body>
</html>
