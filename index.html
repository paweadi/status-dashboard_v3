
<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0'>
<title>Markel Services Dashboard</title>
<style>
:root {
    --bg: #ffffff;
    --fg: #1f2937;
    --muted: #6b7280;
    --border: #d1d5db;
    --up-bg: #10b981;
    --up-fg: #ffffff;
    --down-bg: #ef4444;
    --down-fg: #ffffff;
    --deg-bg: #f59e0b;
    --deg-fg: #ffffff;
}
body { margin: 0; background: var(--bg); color: var(--fg); font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
header { padding: 24px 16px; border-bottom: 1px solid var(--border); }
h1 { margin: 0 0 8px; }
.ts { color: var(--muted); }
main { width: 100%; margin: 0; padding: 16px; }
table { width: 100%; table-layout: fixed; border-collapse: collapse; }
th, td { padding: 10px; text-align: left; border: 1px solid var(--border); }
th { background-color: #f3f4f6; font-weight: 700; font-size: 16px; }
tr:nth-child(even) { background-color: #f9fafb; }
tr:hover { background-color: #e5e7eb; }
.badge { padding: 4px 10px; border-radius: 999px; font-size: 12px; background: #e5e7eb; color: var(--fg); }
.badge.up { background: var(--up-bg); color: var(--up-fg); }
.badge.down { background: var(--down-bg); color: var(--down-fg); }
.badge.degraded { background: var(--deg-bg); color: var(--deg-fg); }
footer { color: var(--muted); padding: 12px 16px; border-top: 1px solid var(--border); text-align: center; }
</style>
</head>
<body>
<header>
<h1>Markel Services Dashboard</h1>
<p class='ts'>Auto-refresh every 5 minutes</p>
</header>
<main>
<table>
<thead>
<tr>
<th>Service</th>
<th>Status</th>
<th>Description</th>
<th>Link</th>
</tr>
</thead>
<tbody>
<tr><td>Azure Status</td><td data-service="azure"><span class="badge">Loading...</span></td><td>Loading...</td><td><a href="https://status.azure.com" target="_blank">View</a></td></tr>
<tr><td>Azure DevOps</td><td data-service="azuredevops"><span class="badge">Loading...</span></td><td>Loading...</td><td><a href="https://status.dev.azure.com" target="_blank">View</a></td></tr>
<tr><td>Azure Databricks</td><td data-service="databricks"><span class="badge">Loading...</span></td><td>Loading...</td><td><a href="https://status.azuredatabricks.net" target="_blank">View</a></td></tr>
<tr><td>JFrog</td><td data-service="jfrog"><span class="badge">Loading...</span></td><td>Loading...</td><td><a href="https://status.jfrog.io" target="_blank">View</a></td></tr>
<tr><td>Elastic</td><td data-service="elastic"><span class="badge">Loading...</span></td><td>Loading...</td><td><a href="https://status.elastic.co" target="_blank">View</a></td></tr>
<tr><td>Octopus</td><td data-service="octopus"><span class="badge">Loading...</span></td><td>Loading...</td><td><a href="https://status.octopus.com" target="_blank">View</a></td></tr>
<tr><td>Lucid</td><td data-service="lucid"><span class="badge">Loading...</span></td><td>Loading...</td><td><a href="https://status.lucid.co" target="_blank">View</a></td></tr>
<tr><td>Jira Software</td><td data-service="jira"><span class="badge">Loading...</span></td><td>Loading...</td><td><a href="https://status.atlassian.com" target="_blank">View</a></td></tr>
<tr><td>Confluence</td><td data-service="confluence"><span class="badge">Loading...</span></td><td>Loading...</td><td><a href="https://status.atlassian.com" target="_blank">View</a></td></tr>
<tr><td>CucumberStudio</td><td data-service="cucumber"><span class="badge">Loading...</span></td><td>Loading...</td><td><a href="https://status.cucumberstudio.com" target="_blank">View</a></td></tr>
<tr><td>Fivetran</td><td data-service="fivetran"><span class="badge">Loading...</span></td><td>Loading...</td><td><a href="https://status.fivetran.com" target="_blank">View</a></td></tr>
<tr><td>Brainboard</td><td data-service="brainboard"><span class="badge">Loading...</span></td><td>Loading...</td><td><a href="https://status.brainboard.co" target="_blank">View</a></td></tr>
<tr><td>Port</td><td data-service="port"><span class="badge">Loading...</span></td><td>Loading...</td><td><a href="https://status.port.io" target="_blank">View</a></td></tr>
</tbody>
</table>
</main>
<footer>
Last updated: <span id="last-updated"></span>
</footer>
<script>
const services = {
    azure: { url: 'https://status.azure.com/en-us/status', type: 'html' },
    azuredevops: { url: 'https://status.dev.azure.com/', type: 'html' },
    databricks: { url: 'https://status.azuredatabricks.net/api/v2/status.json', type: 'json' },
    jfrog: { url: 'https://status.jfrog.io/api/v2/status.json', type: 'json' },
    elastic: { url: 'https://status.elastic.co/api/v2/status.json', type: 'json' },
    octopus: { url: 'https://status.octopus.com/api/v2/status.json', type: 'json' },
    lucid: { url: 'https://status.lucid.co/api/v2/status.json', type: 'json' },
    jira: { url: 'https://status.atlassian.com/api/v2/status.json', type: 'json' },
    confluence: { url: 'https://status.atlassian.com/api/v2/status.json', type: 'json' },
    cucumber: { url: 'https://status.cucumberstudio.com/api/v2/status.json', type: 'json' },
    fivetran: { url: 'https://status.fivetran.com/api/v2/status.json', type: 'json' },
    brainboard: { url: 'https://status.brainboard.co', type: 'html' },
    port: { url: 'https://status.port.io/api/v2/status.json', type: 'json' }
};

async function fetchStatus(service, config) {
    try {
        let statusText = 'Unknown';
        let badgeClass = 'degraded';

        if (config.type === 'json') {
            const response = await fetch(config.url);
            const data = await response.json();
            statusText = data.status.description || 'Unknown';
            badgeClass = statusText.includes('Operational') ? 'up' : (statusText.includes('Outage') ? 'down' : 'degraded');
        } else if (config.type === 'html') {
            const response = await fetch(config.url);
            const text = await response.text();
            if (text.includes('Operational')) {
                statusText = 'All Systems Operational';
                badgeClass = 'up';
            } else if (text.includes('Outage')) {
                statusText = 'Major Outage';
                badgeClass = 'down';
            } else if (text.includes('Degraded')) {
                statusText = 'Degraded Performance';
                badgeClass = 'degraded';
            } else {
                statusText = 'Check site';
            }
        }

        const cell = document.querySelector(`td[data-service="${service}"] span`);
        cell.textContent = statusText;
        cell.className = `badge ${badgeClass}`;
    } catch (error) {
        console.error('Error fetching status for', service, error);
    }
}

function updateAllStatuses() {
    for (const [service, config] of Object.entries(services)) {
        fetchStatus(service, config);
    }
    document.getElementById('last-updated').textContent = new Date().toLocaleString();
}

updateAllStatuses();
setInterval(updateAllStatuses, 300000);
</script>
</body>
</html>
